{"remainingRequest":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\thread-loader\\dist\\cjs.js??ref--9-2!E:\\Users\\David\\Documents\\Ticketing\\node_modules\\ts-loader\\index.js??ref--9-3!E:\\Users\\David\\Documents\\Ticketing\\node_modules\\angular-router-loader\\src\\index.js!E:\\Users\\David\\Documents\\Ticketing\\node_modules\\tslint-loader\\index.js!E:\\Users\\David\\Documents\\Ticketing\\src\\main\\webapp\\app\\blocks\\interceptor\\auth.interceptor.ts","dependencies":[{"path":"E:\\Users\\David\\Documents\\Ticketing\\src\\main\\webapp\\app\\blocks\\interceptor\\auth.interceptor.ts","mtime":1577719337771},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\angular2-template-loader\\index.js","mtime":1486570058000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\angular-router-loader\\src\\index.js","mtime":1512749902000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\tslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tICJ0c2xpYiI7DQp2YXIgX2EsIF9iOw0KaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOw0KaW1wb3J0IHsgTG9jYWxTdG9yYWdlU2VydmljZSwgU2Vzc2lvblN0b3JhZ2VTZXJ2aWNlIH0gZnJvbSAnbmd4LXdlYnN0b3JhZ2UnOw0KaW1wb3J0IHsgU0VSVkVSX0FQSV9VUkwgfSBmcm9tICdhcHAvYXBwLmNvbnN0YW50cyc7DQpsZXQgQXV0aEludGVyY2VwdG9yID0gY2xhc3MgQXV0aEludGVyY2VwdG9yIHsNCiAgICBjb25zdHJ1Y3Rvcihsb2NhbFN0b3JhZ2UsIHNlc3Npb25TdG9yYWdlKSB7DQogICAgICAgIHRoaXMubG9jYWxTdG9yYWdlID0gbG9jYWxTdG9yYWdlOw0KICAgICAgICB0aGlzLnNlc3Npb25TdG9yYWdlID0gc2Vzc2lvblN0b3JhZ2U7DQogICAgfQ0KICAgIGludGVyY2VwdChyZXF1ZXN0LCBuZXh0KSB7DQogICAgICAgIGlmICghcmVxdWVzdCB8fCAhcmVxdWVzdC51cmwgfHwgKC9eaHR0cC8udGVzdChyZXF1ZXN0LnVybCkgJiYgIShTRVJWRVJfQVBJX1VSTCAmJiByZXF1ZXN0LnVybC5zdGFydHNXaXRoKFNFUlZFUl9BUElfVVJMKSkpKSB7DQogICAgICAgICAgICByZXR1cm4gbmV4dC5oYW5kbGUocmVxdWVzdCk7DQogICAgICAgIH0NCiAgICAgICAgY29uc3QgdG9rZW4gPSB0aGlzLmxvY2FsU3RvcmFnZS5yZXRyaWV2ZSgnYXV0aGVudGljYXRpb25Ub2tlbicpIHx8IHRoaXMuc2Vzc2lvblN0b3JhZ2UucmV0cmlldmUoJ2F1dGhlbnRpY2F0aW9uVG9rZW4nKTsNCiAgICAgICAgaWYgKCEhdG9rZW4pIHsNCiAgICAgICAgICAgIHJlcXVlc3QgPSByZXF1ZXN0LmNsb25lKHsNCiAgICAgICAgICAgICAgICBzZXRIZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJyArIHRva2VuDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIG5leHQuaGFuZGxlKHJlcXVlc3QpOw0KICAgIH0NCn07DQpBdXRoSW50ZXJjZXB0b3IgPSB0c2xpYl8xLl9fZGVjb3JhdGUoWw0KICAgIEluamVjdGFibGUoKSwNCiAgICB0c2xpYl8xLl9fbWV0YWRhdGEoImRlc2lnbjpwYXJhbXR5cGVzIiwgW3R5cGVvZiAoX2EgPSB0eXBlb2YgTG9jYWxTdG9yYWdlU2VydmljZSAhPT0gInVuZGVmaW5lZCIgJiYgTG9jYWxTdG9yYWdlU2VydmljZSkgPT09ICJmdW5jdGlvbiIgPyBfYSA6IE9iamVjdCwgdHlwZW9mIChfYiA9IHR5cGVvZiBTZXNzaW9uU3RvcmFnZVNlcnZpY2UgIT09ICJ1bmRlZmluZWQiICYmIFNlc3Npb25TdG9yYWdlU2VydmljZSkgPT09ICJmdW5jdGlvbiIgPyBfYiA6IE9iamVjdF0pDQpdLCBBdXRoSW50ZXJjZXB0b3IpOw0KZXhwb3J0IHsgQXV0aEludGVyY2VwdG9yIH07DQo="},{"version":3,"file":"E:\\Users\\David\\Documents\\Ticketing\\src\\main\\webapp\\app\\blocks\\interceptor\\auth.interceptor.ts","sourceRoot":"","sources":["E:\\Users\\David\\Documents\\Ticketing\\node_modules\\angular-router-loader\\src\\index.js!E:\\Users\\David\\Documents\\Ticketing\\node_modules\\tslint-loader\\index.js!E:\\Users\\David\\Documents\\Ticketing\\src\\main\\webapp\\app\\blocks\\interceptor\\auth.interceptor.ts"],"names":[],"mappings":";;AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAE3C,OAAO,EAAE,mBAAmB,EAAE,qBAAqB,EAAE,MAAM,gBAAgB,CAAC;AAG5E,OAAO,EAAE,cAAc,EAAE,MAAM,mBAAmB,CAAC;AAGnD,IAAa,eAAe,GAA5B,MAAa,eAAe;IAC1B,YAAoB,YAAiC,EAAU,cAAqC;QAAhF,iBAAY,GAAZ,YAAY,CAAqB;QAAU,mBAAc,GAAd,cAAc,CAAuB;IAAG,CAAC;IAExG,SAAS,CAAC,OAAyB,EAAE,IAAiB;QACpD,IAAI,CAAC,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,cAAc,IAAI,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE;YAC1H,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;SAC7B;QAED,MAAM,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,qBAAqB,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,qBAAqB,CAAC,CAAC;QACvH,IAAI,CAAC,CAAC,KAAK,EAAE;YACX,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC;gBACtB,UAAU,EAAE;oBACV,aAAa,EAAE,SAAS,GAAG,KAAK;iBACjC;aACF,CAAC,CAAC;SACJ;QACD,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;IAC9B,CAAC;CACF,CAAA;AAlBY,eAAe;IAD3B,UAAU,EAAE;iEAEuB,mBAAmB,oBAAnB,mBAAmB,oDAA0B,qBAAqB,oBAArB,qBAAqB;GADzF,eAAe,CAkB3B;SAlBY,eAAe","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { LocalStorageService, SessionStorageService } from 'ngx-webstorage';\r\nimport { HttpInterceptor, HttpRequest, HttpHandler, HttpEvent } from '@angular/common/http';\r\n\r\nimport { SERVER_API_URL } from 'app/app.constants';\r\n\r\n@Injectable()\r\nexport class AuthInterceptor implements HttpInterceptor {\r\n  constructor(private localStorage: LocalStorageService, private sessionStorage: SessionStorageService) {}\r\n\r\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n    if (!request || !request.url || (/^http/.test(request.url) && !(SERVER_API_URL && request.url.startsWith(SERVER_API_URL)))) {\r\n      return next.handle(request);\r\n    }\r\n\r\n    const token = this.localStorage.retrieve('authenticationToken') || this.sessionStorage.retrieve('authenticationToken');\r\n    if (!!token) {\r\n      request = request.clone({\r\n        setHeaders: {\r\n          Authorization: 'Bearer ' + token\r\n        }\r\n      });\r\n    }\r\n    return next.handle(request);\r\n  }\r\n}\r\n"]}]}