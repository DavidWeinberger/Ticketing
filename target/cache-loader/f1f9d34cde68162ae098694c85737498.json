{"remainingRequest":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\thread-loader\\dist\\cjs.js??ref--9-2!E:\\Users\\David\\Documents\\Ticketing\\node_modules\\ts-loader\\index.js??ref--9-3!E:\\Users\\David\\Documents\\Ticketing\\node_modules\\angular-router-loader\\src\\index.js!E:\\Users\\David\\Documents\\Ticketing\\node_modules\\tslint-loader\\index.js!E:\\Users\\David\\Documents\\Ticketing\\src\\main\\webapp\\app\\entities\\shopping-cart\\shopping-cart.component.ts","dependencies":[{"path":"E:\\Users\\David\\Documents\\Ticketing\\src\\main\\webapp\\app\\entities\\shopping-cart\\shopping-cart.component.ts","mtime":1578263107283},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\angular2-template-loader\\index.js","mtime":1486570058000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\angular-router-loader\\src\\index.js","mtime":1512749902000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\tslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tICJ0c2xpYiI7DQp2YXIgX2EsIF9iLCBfYywgX2QsIF9lOw0KaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7DQppbXBvcnQgeyBDYXJ0U2VydmljZSB9IGZyb20gJ2FwcC9lbnRpdGllcy9jYXJ0JzsNCmltcG9ydCB7IGZpbHRlciwgbWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnOw0KaW1wb3J0IHsgVGlja2V0c1NlcnZpY2UgfSBmcm9tICdhcHAvZW50aXRpZXMvdGlja2V0cyc7DQppbXBvcnQgeyBKaGlFdmVudE1hbmFnZXIgfSBmcm9tICduZy1qaGlwc3Rlcic7DQppbXBvcnQgeyBBY2NvdW50U2VydmljZSB9IGZyb20gJ2FwcC9jb3JlJzsNCmltcG9ydCB7IE5vdGlmaWNhdGlvblNlcnZpY2UgfSBmcm9tICdhcHAvc2hhcmVkL25vdGlmaWNhdGlvbi5zZXJ2aWNlJzsNCmxldCBTaG9wcGluZ0NhcnRDb21wb25lbnQgPSBjbGFzcyBTaG9wcGluZ0NhcnRDb21wb25lbnQgew0KICAgIGNvbnN0cnVjdG9yKGNhcnRTZXJ2aWNlLCB0aWNrZXRTZXJ2aWNlLCBldmVudE1hbmFnZXIsIGFjY291bnRTZXJ2aWNlLCBub3RpZmljYXRpb25TZXJ2aWNlKSB7DQogICAgICAgIHRoaXMuY2FydFNlcnZpY2UgPSBjYXJ0U2VydmljZTsNCiAgICAgICAgdGhpcy50aWNrZXRTZXJ2aWNlID0gdGlja2V0U2VydmljZTsNCiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIgPSBldmVudE1hbmFnZXI7DQogICAgICAgIHRoaXMuYWNjb3VudFNlcnZpY2UgPSBhY2NvdW50U2VydmljZTsNCiAgICAgICAgdGhpcy5ub3RpZmljYXRpb25TZXJ2aWNlID0gbm90aWZpY2F0aW9uU2VydmljZTsNCiAgICAgICAgdGhpcy50aWNrZXRzID0gW107DQogICAgICAgIHRoaXMuYWNjb3VudCA9IG51bGw7DQogICAgICAgIHRoaXMudXNlcklkID0gMDsNCiAgICB9DQogICAgbmdPbkluaXQoKSB7DQogICAgICAgIHRoaXMucmVmcmVzaENhcnQoKTsNCiAgICAgICAgdGhpcy5ub3RpZmljYXRpb25TZXJ2aWNlLmxpc3RlbigpLnN1YnNjcmliZShkYXRhID0+IHsNCiAgICAgICAgICAgIGlmIChkYXRhICE9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGRhdGEudG9TdHJpbmcoKS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhcnRzKTsNCiAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoID4gMSkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjaHVua3MgPSBwYXJ0c1sxXS5zcGxpdCgnOicpOw0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51c2VySWQudG9TdHJpbmcoKSA9PT0gY2h1bmtzWzFdKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVXNlciBmb3VuZCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoQ2FydCgpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hDYXJ0KCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIHRoaXMucmVmcmVzaENhcnQoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfQ0KICAgIHJlZnJlc2hDYXJ0KCkgew0KICAgICAgICBjb25zdCBfdGlja2V0cyA9IFtdOw0KICAgICAgICB0aGlzLmNhcnRTZXJ2aWNlDQogICAgICAgICAgICAucXVlcnkoKQ0KICAgICAgICAgICAgLnBpcGUoZmlsdGVyKChyZXMpID0+IHJlcy5vayksIG1hcCgocmVzKSA9PiByZXMuYm9keSkpDQogICAgICAgICAgICAuc3Vic2NyaWJlKChyZXMpID0+IHsNCiAgICAgICAgICAgIHRoaXMuY2FydHMgPSByZXM7DQogICAgICAgICAgICBpZiAodGhpcy5hY2NvdW50ID09PSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy5hY2NvdW50ID0gdGhpcy5hY2NvdW50U2VydmljZS5pZGVudGl0eSgpLnRoZW4oKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuYWNjb3VudC50aGVuKHggPT4gew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZXJJZCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXJJZCA9IE51bWJlcih4LmlkKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5jYXJ0cyA9IHRoaXMuY2FydHMuZmlsdGVyKGRhdGEgPT4gZGF0YS51c2VySWQgPT09IHRoaXMudXNlcklkKTsNCiAgICAgICAgICAgICAgICB0aGlzLmNhcnRzLmZvckVhY2goeSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudGlja2V0U2VydmljZS5maW5kKHkudGlja2V0SWQpLnN1YnNjcmliZSh0aWNrZXQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgX3RpY2tldHMucHVzaCh0aWNrZXQuYm9keSk7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIHRoaXMudGlja2V0cyA9IF90aWNrZXRzOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sIChyZXMpID0+IHRoaXMub25FcnJvcihyZXMubWVzc2FnZSkpOw0KICAgIH0NCiAgICByZW1vdmUodGlja2V0KSB7DQogICAgICAgIC8vIGNvbnN0IGNhcnRFbnRyeSA9IHRoaXMuY2FydHMuZmluZCh4ID0+IHgudGlja2V0SWQgPT09IHRpY2tldC5pZCk7DQogICAgICAgIC8vIGNvbnNvbGUubG9nKGNhcnRFbnRyeSk7DQogICAgICAgIC8vIHRoaXMuY2FydFNlcnZpY2UuZGVsZXRlKGNhcnRFbnRyeS5pZCkuc3Vic2NyaWJlKCk7DQogICAgICAgIHRoaXMuY2FydFNlcnZpY2UuZGVsZXRlQnlUaWNrZXRJZCh0aWNrZXQuaWQpLnN1YnNjcmliZSgpOw0KICAgICAgICB0aWNrZXQuc3RhdGUgPSAwOw0KICAgICAgICB0aGlzLnRpY2tldFNlcnZpY2UudXBkYXRlKHRpY2tldCkuc3Vic2NyaWJlKCk7DQogICAgfQ0KICAgIG9uRXJyb3IobWVzc2FnZSkgew0KICAgICAgICBjb25zb2xlLmxvZygnRXJyb3InKTsNCiAgICB9DQp9Ow0KU2hvcHBpbmdDYXJ0Q29tcG9uZW50ID0gdHNsaWJfMS5fX2RlY29yYXRlKFsNCiAgICBDb21wb25lbnQoew0KICAgICAgICBzZWxlY3RvcjogJ2poaS1zaG9wcGluZy1jYXJ0JywNCiAgICAgICAgdGVtcGxhdGVVcmw6ICcuL3Nob3BwaW5nLWNhcnQuY29tcG9uZW50Lmh0bWwnLA0KICAgICAgICBzdHlsZVVybHM6IFsnLi9zaG9wcGluZy1jYXJ0LmNvbXBvbmVudC5zY3NzJ10NCiAgICB9KSwNCiAgICB0c2xpYl8xLl9fbWV0YWRhdGEoImRlc2lnbjpwYXJhbXR5cGVzIiwgW3R5cGVvZiAoX2EgPSB0eXBlb2YgQ2FydFNlcnZpY2UgIT09ICJ1bmRlZmluZWQiICYmIENhcnRTZXJ2aWNlKSA9PT0gImZ1bmN0aW9uIiA/IF9hIDogT2JqZWN0LCB0eXBlb2YgKF9iID0gdHlwZW9mIFRpY2tldHNTZXJ2aWNlICE9PSAidW5kZWZpbmVkIiAmJiBUaWNrZXRzU2VydmljZSkgPT09ICJmdW5jdGlvbiIgPyBfYiA6IE9iamVjdCwgdHlwZW9mIChfYyA9IHR5cGVvZiBKaGlFdmVudE1hbmFnZXIgIT09ICJ1bmRlZmluZWQiICYmIEpoaUV2ZW50TWFuYWdlcikgPT09ICJmdW5jdGlvbiIgPyBfYyA6IE9iamVjdCwgdHlwZW9mIChfZCA9IHR5cGVvZiBBY2NvdW50U2VydmljZSAhPT0gInVuZGVmaW5lZCIgJiYgQWNjb3VudFNlcnZpY2UpID09PSAiZnVuY3Rpb24iID8gX2QgOiBPYmplY3QsIHR5cGVvZiAoX2UgPSB0eXBlb2YgTm90aWZpY2F0aW9uU2VydmljZSAhPT0gInVuZGVmaW5lZCIgJiYgTm90aWZpY2F0aW9uU2VydmljZSkgPT09ICJmdW5jdGlvbiIgPyBfZSA6IE9iamVjdF0pDQpdLCBTaG9wcGluZ0NhcnRDb21wb25lbnQpOw0KZXhwb3J0IHsgU2hvcHBpbmdDYXJ0Q29tcG9uZW50IH07DQo="},{"version":3,"file":"E:\\Users\\David\\Documents\\Ticketing\\src\\main\\webapp\\app\\entities\\shopping-cart\\shopping-cart.component.ts","sourceRoot":"","sources":["E:\\Users\\David\\Documents\\Ticketing\\node_modules\\angular-router-loader\\src\\index.js!E:\\Users\\David\\Documents\\Ticketing\\node_modules\\tslint-loader\\index.js!E:\\Users\\David\\Documents\\Ticketing\\src\\main\\webapp\\app\\entities\\shopping-cart\\shopping-cart.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Cart, ICart } from 'app/shared/model/cart.model';\nimport { CartService } from 'app/entities/cart';\nimport { filter, map } from 'rxjs/operators';\nimport { HttpErrorResponse, HttpResponse } from '@angular/common/http';\nimport { ITickets } from 'app/shared/model/tickets.model';\nimport { TicketsService } from 'app/entities/tickets';\nimport { Subscription } from 'rxjs';\nimport { JhiEventManager } from 'ng-jhipster';\nimport { AccountService } from 'app/core';\nimport { NotificationService } from 'app/shared/notification.service';\n\n@Component({\n  selector: 'jhi-shopping-cart',\n  templateUrl: './shopping-cart.component.html',\n  styleUrls: ['./shopping-cart.component.scss']\n})\nexport class ShoppingCartComponent implements OnInit {\n  tickets: ITickets[] = [];\n  protected carts: ICart[];\n  eventSubscriber: Subscription;\n  protected account: Promise<Account> = null;\n  protected userId = 0;\n\n  constructor(\n    protected cartService: CartService,\n    protected ticketService: TicketsService,\n    protected eventManager: JhiEventManager,\n    protected accountService: AccountService,\n    protected notificationService: NotificationService\n  ) {}\n\n  ngOnInit() {\n    this.refreshCart();\n    this.notificationService.listen().subscribe(data => {\n      if (data !== undefined) {\n        const parts = data.toString().split('|');\n        console.log(parts);\n        if (parts.length > 1) {\n          const chunks = parts[1].split(':');\n          if (this.userId.toString() === chunks[1]) {\n            console.log('User found');\n            this.refreshCart();\n          }\n        } else {\n          this.refreshCart();\n        }\n        // this.refreshCart();\n      }\n    });\n  }\n\n  public refreshCart() {\n    const _tickets: ITickets[] = [];\n    this.cartService\n      .query()\n      .pipe(\n        filter((res: HttpResponse<ICart[]>) => res.ok),\n        map((res: HttpResponse<ICart[]>) => res.body)\n      )\n      .subscribe(\n        (res: ICart[]) => {\n          this.carts = res;\n          if (this.account === null) {\n            this.account = this.accountService.identity().then();\n          }\n          this.account.then(x => {\n            if (this.userId === 0) {\n              this.userId = Number(x.id);\n            }\n\n            this.carts = this.carts.filter(data => data.userId === this.userId);\n            this.carts.forEach(y => {\n              this.ticketService.find(y.ticketId).subscribe(ticket => {\n                _tickets.push(ticket.body);\n              });\n            });\n            this.tickets = _tickets;\n          });\n        },\n        (res: HttpErrorResponse) => this.onError(res.message)\n      );\n  }\n\n  public remove(ticket: ITickets) {\n    // const cartEntry = this.carts.find(x => x.ticketId === ticket.id);\n    // console.log(cartEntry);\n    // this.cartService.delete(cartEntry.id).subscribe();\n    this.cartService.deleteByTicketId(ticket.id).subscribe();\n    ticket.state = 0;\n    this.ticketService.update(ticket).subscribe();\n  }\n\n  private onError(message: string) {\n    console.log('Error');\n  }\n}\n"]}]}