{"remainingRequest":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\thread-loader\\dist\\cjs.js??ref--9-2!E:\\Users\\David\\Documents\\Ticketing\\node_modules\\ts-loader\\index.js??ref--9-3!E:\\Users\\David\\Documents\\Ticketing\\node_modules\\angular-router-loader\\src\\index.js!E:\\Users\\David\\Documents\\Ticketing\\node_modules\\tslint-loader\\index.js!E:\\Users\\David\\Documents\\Ticketing\\src\\main\\webapp\\app\\entities\\shopping-cart\\shopping-cart.component.ts","dependencies":[{"path":"E:\\Users\\David\\Documents\\Ticketing\\src\\main\\webapp\\app\\entities\\shopping-cart\\shopping-cart.component.ts","mtime":1578342338964},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\angular2-template-loader\\index.js","mtime":1486570058000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\angular-router-loader\\src\\index.js","mtime":1512749902000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\tslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tICJ0c2xpYiI7DQp2YXIgX2EsIF9iLCBfYywgX2QsIF9lOw0KaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOw0KaW1wb3J0IHsgQ2FydFNlcnZpY2UgfSBmcm9tICdhcHAvZW50aXRpZXMvY2FydCc7DQppbXBvcnQgeyBmaWx0ZXIsIG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJzsNCmltcG9ydCB7IFRpY2tldHNTZXJ2aWNlIH0gZnJvbSAnYXBwL2VudGl0aWVzL3RpY2tldHMnOw0KaW1wb3J0IHsgSmhpRXZlbnRNYW5hZ2VyIH0gZnJvbSAnbmctamhpcHN0ZXInOw0KaW1wb3J0IHsgQWNjb3VudFNlcnZpY2UgfSBmcm9tICdhcHAvY29yZSc7DQppbXBvcnQgeyBOb3RpZmljYXRpb25TZXJ2aWNlIH0gZnJvbSAnYXBwL3NoYXJlZC9ub3RpZmljYXRpb24uc2VydmljZSc7DQpsZXQgU2hvcHBpbmdDYXJ0Q29tcG9uZW50ID0gY2xhc3MgU2hvcHBpbmdDYXJ0Q29tcG9uZW50IHsNCiAgICBjb25zdHJ1Y3RvcihjYXJ0U2VydmljZSwgdGlja2V0U2VydmljZSwgZXZlbnRNYW5hZ2VyLCBhY2NvdW50U2VydmljZSwgbm90aWZpY2F0aW9uU2VydmljZSkgew0KICAgICAgICB0aGlzLmNhcnRTZXJ2aWNlID0gY2FydFNlcnZpY2U7DQogICAgICAgIHRoaXMudGlja2V0U2VydmljZSA9IHRpY2tldFNlcnZpY2U7DQogICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyID0gZXZlbnRNYW5hZ2VyOw0KICAgICAgICB0aGlzLmFjY291bnRTZXJ2aWNlID0gYWNjb3VudFNlcnZpY2U7DQogICAgICAgIHRoaXMubm90aWZpY2F0aW9uU2VydmljZSA9IG5vdGlmaWNhdGlvblNlcnZpY2U7DQogICAgICAgIHRoaXMudGFibGV0ID0gZmFsc2U7DQogICAgICAgIHRoaXMudGlja2V0cyA9IFtdOw0KICAgICAgICB0aGlzLmFjY291bnQgPSBudWxsOw0KICAgICAgICB0aGlzLnVzZXJJZCA9IDA7DQogICAgICAgIHRoaXMucHJpY2UgPSAwOw0KICAgIH0NCiAgICBuZ09uSW5pdCgpIHsNCiAgICAgICAgdGhpcy5yZWZyZXNoQ2FydCgpOw0KICAgICAgICB0aGlzLm5vdGlmaWNhdGlvblNlcnZpY2UubGlzdGVuKCkuc3Vic2NyaWJlKGRhdGEgPT4gew0KICAgICAgICAgICAgaWYgKGRhdGEgIT09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gZGF0YS50b1N0cmluZygpLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocGFydHMpOw0KICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rcyA9IHBhcnRzWzFdLnNwbGl0KCc6Jyk7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZXJJZC50b1N0cmluZygpID09PSBjaHVua3NbMV0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVc2VyIGZvdW5kJyk7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hDYXJ0KCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaENhcnQoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gdGhpcy5yZWZyZXNoQ2FydCgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgcmVmcmVzaENhcnQoKSB7DQogICAgICAgIGNvbnN0IF90aWNrZXRzID0gW107DQogICAgICAgIHRoaXMuY2FydFNlcnZpY2UNCiAgICAgICAgICAgIC5xdWVyeSgpDQogICAgICAgICAgICAucGlwZShmaWx0ZXIoKHJlcykgPT4gcmVzLm9rKSwgbWFwKChyZXMpID0+IHJlcy5ib2R5KSkNCiAgICAgICAgICAgIC5zdWJzY3JpYmUoKHJlcykgPT4gew0KICAgICAgICAgICAgdGhpcy5jYXJ0cyA9IHJlczsNCiAgICAgICAgICAgIGlmICh0aGlzLmFjY291bnQgPT09IG51bGwpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmFjY291bnQgPSB0aGlzLmFjY291bnRTZXJ2aWNlLmlkZW50aXR5KCkudGhlbigpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5hY2NvdW50LnRoZW4oeCA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMudXNlcklkID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudXNlcklkID0gTnVtYmVyKHguaWQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLnByaWNlID0gMDsNCiAgICAgICAgICAgICAgICB0aGlzLmNhcnRzID0gdGhpcy5jYXJ0cy5maWx0ZXIoZGF0YSA9PiBkYXRhLnVzZXJJZCA9PT0gdGhpcy51c2VySWQpOw0KICAgICAgICAgICAgICAgIHRoaXMuY2FydHMuZm9yRWFjaCh5ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy50aWNrZXRTZXJ2aWNlLmZpbmQoeS50aWNrZXRJZCkuc3Vic2NyaWJlKHRpY2tldCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBfdGlja2V0cy5wdXNoKHRpY2tldC5ib2R5KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpY2UgKz0gdGlja2V0LmJvZHkucHJpY2U7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIHRoaXMudGlja2V0cyA9IF90aWNrZXRzOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sIChyZXMpID0+IHRoaXMub25FcnJvcihyZXMubWVzc2FnZSkpOw0KICAgIH0NCiAgICByZW1vdmUodGlja2V0KSB7DQogICAgICAgIHRoaXMuY2FydFNlcnZpY2UuZGVsZXRlQnlUaWNrZXRJZCh0aWNrZXQuaWQpLnN1YnNjcmliZSgpOw0KICAgICAgICBpZiAodGlja2V0LnR5cGUgIT09IDIpIHsNCiAgICAgICAgICAgIHRpY2tldC5zdGF0ZSAtPSAxOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgdGlja2V0LnN0YXRlID0gMDsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLnRpY2tldFNlcnZpY2UudXBkYXRlKHRpY2tldCkuc3Vic2NyaWJlKCk7DQogICAgfQ0KICAgIG9uRXJyb3IobWVzc2FnZSkgew0KICAgICAgICBjb25zb2xlLmxvZygnRXJyb3InKTsNCiAgICB9DQogICAgYnV5KCkgew0KICAgICAgICB0aGlzLnRpY2tldHMuZm9yRWFjaCh0aWNrZXQgPT4gew0KICAgICAgICAgICAgdGhpcy5jYXJ0U2VydmljZS5kZWxldGVCeVRpY2tldElkKHRpY2tldC5pZCkuc3Vic2NyaWJlKCk7DQogICAgICAgICAgICB0aWNrZXQuc3RhdGUgPSAyOw0KICAgICAgICAgICAgdGhpcy50aWNrZXRTZXJ2aWNlLnVwZGF0ZSh0aWNrZXQpLnN1YnNjcmliZSgpOw0KICAgICAgICB9KTsNCiAgICB9DQogICAgY2FuY2xlKCkgew0KICAgICAgICB0aGlzLnRpY2tldHMuZm9yRWFjaCh0aWNrZXQgPT4gew0KICAgICAgICAgICAgdGhpcy5jYXJ0U2VydmljZS5kZWxldGVCeVRpY2tldElkKHRpY2tldC5pZCkuc3Vic2NyaWJlKCk7DQogICAgICAgICAgICB0aWNrZXQuc3RhdGUgPSAwOw0KICAgICAgICAgICAgdGhpcy50aWNrZXRTZXJ2aWNlLnVwZGF0ZSh0aWNrZXQpLnN1YnNjcmliZSgpOw0KICAgICAgICB9KTsNCiAgICB9DQp9Ow0KdHNsaWJfMS5fX2RlY29yYXRlKFsNCiAgICBJbnB1dCgpLA0KICAgIHRzbGliXzEuX19tZXRhZGF0YSgiZGVzaWduOnR5cGUiLCBPYmplY3QpDQpdLCBTaG9wcGluZ0NhcnRDb21wb25lbnQucHJvdG90eXBlLCAidGFibGV0Iiwgdm9pZCAwKTsNClNob3BwaW5nQ2FydENvbXBvbmVudCA9IHRzbGliXzEuX19kZWNvcmF0ZShbDQogICAgQ29tcG9uZW50KHsNCiAgICAgICAgc2VsZWN0b3I6ICdqaGktc2hvcHBpbmctY2FydCcsDQogICAgICAgIHRlbXBsYXRlVXJsOiAnLi9zaG9wcGluZy1jYXJ0LmNvbXBvbmVudC5odG1sJywNCiAgICAgICAgc3R5bGVVcmxzOiBbJy4vc2hvcHBpbmctY2FydC5jb21wb25lbnQuc2NzcyddDQogICAgfSksDQogICAgdHNsaWJfMS5fX21ldGFkYXRhKCJkZXNpZ246cGFyYW10eXBlcyIsIFt0eXBlb2YgKF9hID0gdHlwZW9mIENhcnRTZXJ2aWNlICE9PSAidW5kZWZpbmVkIiAmJiBDYXJ0U2VydmljZSkgPT09ICJmdW5jdGlvbiIgPyBfYSA6IE9iamVjdCwgdHlwZW9mIChfYiA9IHR5cGVvZiBUaWNrZXRzU2VydmljZSAhPT0gInVuZGVmaW5lZCIgJiYgVGlja2V0c1NlcnZpY2UpID09PSAiZnVuY3Rpb24iID8gX2IgOiBPYmplY3QsIHR5cGVvZiAoX2MgPSB0eXBlb2YgSmhpRXZlbnRNYW5hZ2VyICE9PSAidW5kZWZpbmVkIiAmJiBKaGlFdmVudE1hbmFnZXIpID09PSAiZnVuY3Rpb24iID8gX2MgOiBPYmplY3QsIHR5cGVvZiAoX2QgPSB0eXBlb2YgQWNjb3VudFNlcnZpY2UgIT09ICJ1bmRlZmluZWQiICYmIEFjY291bnRTZXJ2aWNlKSA9PT0gImZ1bmN0aW9uIiA/IF9kIDogT2JqZWN0LCB0eXBlb2YgKF9lID0gdHlwZW9mIE5vdGlmaWNhdGlvblNlcnZpY2UgIT09ICJ1bmRlZmluZWQiICYmIE5vdGlmaWNhdGlvblNlcnZpY2UpID09PSAiZnVuY3Rpb24iID8gX2UgOiBPYmplY3RdKQ0KXSwgU2hvcHBpbmdDYXJ0Q29tcG9uZW50KTsNCmV4cG9ydCB7IFNob3BwaW5nQ2FydENvbXBvbmVudCB9Ow0K"},{"version":3,"file":"E:\\Users\\David\\Documents\\Ticketing\\src\\main\\webapp\\app\\entities\\shopping-cart\\shopping-cart.component.ts","sourceRoot":"","sources":["E:\\Users\\David\\Documents\\Ticketing\\node_modules\\angular-router-loader\\src\\index.js!E:\\Users\\David\\Documents\\Ticketing\\node_modules\\tslint-loader\\index.js!E:\\Users\\David\\Documents\\Ticketing\\src\\main\\webapp\\app\\entities\\shopping-cart\\shopping-cart.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, Input, OnInit} from '@angular/core';\nimport { Cart, ICart } from 'app/shared/model/cart.model';\nimport { CartService } from 'app/entities/cart';\nimport { filter, map } from 'rxjs/operators';\nimport { HttpErrorResponse, HttpResponse } from '@angular/common/http';\nimport { ITickets } from 'app/shared/model/tickets.model';\nimport { TicketsService } from 'app/entities/tickets';\nimport { Subscription } from 'rxjs';\nimport { JhiEventManager } from 'ng-jhipster';\nimport { AccountService } from 'app/core';\nimport { NotificationService } from 'app/shared/notification.service';\n\n@Component({\n  selector: 'jhi-shopping-cart',\n  templateUrl: './shopping-cart.component.html',\n  styleUrls: ['./shopping-cart.component.scss']\n})\nexport class ShoppingCartComponent implements OnInit {\n  @Input() tablet = false;\n  tickets: ITickets[] = [];\n  protected carts: ICart[];\n  eventSubscriber: Subscription;\n  protected account: Promise<Account> = null;\n  protected userId = 0;\n  protected price = 0;\n  constructor(\n    protected cartService: CartService,\n    protected ticketService: TicketsService,\n    protected eventManager: JhiEventManager,\n    protected accountService: AccountService,\n    protected notificationService: NotificationService\n  ) {}\n\n  ngOnInit() {\n    this.refreshCart();\n    this.notificationService.listen().subscribe(data => {\n      if (data !== undefined) {\n        const parts = data.toString().split('|');\n        console.log(parts);\n        if (parts.length > 1) {\n          const chunks = parts[1].split(':');\n          if (this.userId.toString() === chunks[1]) {\n            console.log('User found');\n            this.refreshCart();\n          }\n        } else {\n          this.refreshCart();\n        }\n        // this.refreshCart();\n      }\n    });\n  }\n\n  public refreshCart() {\n    const _tickets: ITickets[] = [];\n    this.cartService\n      .query()\n      .pipe(\n        filter((res: HttpResponse<ICart[]>) => res.ok),\n        map((res: HttpResponse<ICart[]>) => res.body)\n      )\n      .subscribe(\n        (res: ICart[]) => {\n          this.carts = res;\n          if (this.account === null) {\n            this.account = this.accountService.identity().then();\n          }\n          this.account.then(x => {\n            if (this.userId === 0) {\n              this.userId = Number(x.id);\n            }\n            this.price = 0;\n            this.carts = this.carts.filter(data => data.userId === this.userId);\n            this.carts.forEach(y => {\n              this.ticketService.find(y.ticketId).subscribe(ticket => {\n                _tickets.push(ticket.body);\n                this.price += ticket.body.price;\n              });\n            });\n            this.tickets = _tickets;\n          });\n        },\n        (res: HttpErrorResponse) => this.onError(res.message)\n      );\n  }\n\n  public remove(ticket: ITickets) {\n    this.cartService.deleteByTicketId(ticket.id).subscribe();\n    if (ticket.type !== 2) {\n      ticket.state -= 1;\n    } else {\n      ticket.state = 0;\n    }\n    this.ticketService.update(ticket).subscribe();\n  }\n\n  private onError(message: string) {\n    console.log('Error');\n  }\n\n  buy() {\n    this.tickets.forEach( ticket => {\n      this.cartService.deleteByTicketId(ticket.id).subscribe();\n      ticket.state = 2;\n      this.ticketService.update(ticket).subscribe();\n    });\n  }\n\n  cancle() {\n    this.tickets.forEach( ticket => {\n      this.cartService.deleteByTicketId(ticket.id).subscribe();\n      ticket.state = 0;\n      this.ticketService.update(ticket).subscribe();\n    });\n  }\n}\n"]}]}