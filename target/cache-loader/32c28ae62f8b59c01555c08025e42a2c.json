{"remainingRequest":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\thread-loader\\dist\\cjs.js??ref--9-2!E:\\Users\\David\\Documents\\Ticketing\\node_modules\\ts-loader\\index.js??ref--9-3!E:\\Users\\David\\Documents\\Ticketing\\node_modules\\angular-router-loader\\src\\index.js!E:\\Users\\David\\Documents\\Ticketing\\node_modules\\tslint-loader\\index.js!E:\\Users\\David\\Documents\\Ticketing\\src\\main\\webapp\\app\\entities\\sale\\shopping-cart\\shopping-cart.component.ts","dependencies":[{"path":"E:\\Users\\David\\Documents\\Ticketing\\src\\main\\webapp\\app\\entities\\sale\\shopping-cart\\shopping-cart.component.ts","mtime":1570560969592},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\angular2-template-loader\\index.js","mtime":1486570058000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\angular-router-loader\\src\\index.js","mtime":1512749902000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\tslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tICJ0c2xpYiI7DQp2YXIgX2EsIF9iLCBfYywgX2Q7DQppbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAYW5ndWxhci9jb3JlJzsNCmltcG9ydCB7IENhcnRTZXJ2aWNlIH0gZnJvbSAnYXBwL2VudGl0aWVzL2NhcnQnOw0KaW1wb3J0IHsgZmlsdGVyLCBtYXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7DQppbXBvcnQgeyBUaWNrZXRzU2VydmljZSB9IGZyb20gJ2FwcC9lbnRpdGllcy90aWNrZXRzJzsNCmltcG9ydCB7IEpoaUV2ZW50TWFuYWdlciB9IGZyb20gJ25nLWpoaXBzdGVyJzsNCmltcG9ydCB7IEFjY291bnRTZXJ2aWNlIH0gZnJvbSAnYXBwL2NvcmUnOw0KbGV0IFNob3BwaW5nQ2FydENvbXBvbmVudCA9IGNsYXNzIFNob3BwaW5nQ2FydENvbXBvbmVudCB7DQogICAgY29uc3RydWN0b3IoY2FydFNlcnZpY2UsIHRpY2tldFNlcnZpY2UsIGV2ZW50TWFuYWdlciwgYWNjb3VudFNlcnZpY2UpIHsNCiAgICAgICAgdGhpcy5jYXJ0U2VydmljZSA9IGNhcnRTZXJ2aWNlOw0KICAgICAgICB0aGlzLnRpY2tldFNlcnZpY2UgPSB0aWNrZXRTZXJ2aWNlOw0KICAgICAgICB0aGlzLmV2ZW50TWFuYWdlciA9IGV2ZW50TWFuYWdlcjsNCiAgICAgICAgdGhpcy5hY2NvdW50U2VydmljZSA9IGFjY291bnRTZXJ2aWNlOw0KICAgICAgICB0aGlzLnRpY2tldHMgPSBbXTsNCiAgICAgICAgdGhpcy51c2VySWQgPSAwOw0KICAgIH0NCiAgICBuZ09uSW5pdCgpIHsNCiAgICAgICAgdGhpcy5yZWZyZXNoQ2FydCgpOw0KICAgICAgICB0aGlzLnJlZ2lzdGVyQ2hhbmdlSW5DYXJ0cygpOw0KICAgIH0NCiAgICByZWZyZXNoQ2FydCgpIHsNCiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgdGhpcy5jYXJ0U2VydmljZQ0KICAgICAgICAgICAgICAgIC5xdWVyeSgpDQogICAgICAgICAgICAgICAgLnBpcGUoZmlsdGVyKChyZXMpID0+IHJlcy5vayksIG1hcCgocmVzKSA9PiByZXMuYm9keSkpDQogICAgICAgICAgICAgICAgLnN1YnNjcmliZSgocmVzKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5jYXJ0cyA9IHJlczsNCiAgICAgICAgICAgICAgICB0aGlzLmFjY291bnQgPSB0aGlzLmFjY291bnRTZXJ2aWNlLmlkZW50aXR5KCkudGhlbigpOw0KICAgICAgICAgICAgICAgIHRoaXMuYWNjb3VudC50aGVuKHggPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXJJZCA9IE51bWJlcih4LmlkKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXJ0cyA9IHRoaXMuY2FydHMuZmlsdGVyKGRhdGEgPT4gZGF0YS51c2VySWQgPT09IHRoaXMudXNlcklkKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXJ0cy5mb3JFYWNoKHsgdGhpczogLnRpY2tldFNlcnZpY2UuZmluZCh4LnRpY2tldElkKS5zdWJzY3JpYmUodGlja2V0ID0+IHsgdGhpcy50aWNrZXRzLnB1c2godGlja2V0LmJvZHkpOyB9KSB9KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0sIChyZXMpID0+IHRoaXMub25FcnJvcihyZXMubWVzc2FnZSkpOw0KICAgICAgICB9KTsNCiAgICB9DQogICAgcmVnaXN0ZXJDaGFuZ2VJbkNhcnRzKCkgew0KICAgICAgICB0aGlzLmV2ZW50U3Vic2NyaWJlciA9IHRoaXMuZXZlbnRNYW5hZ2VyLnN1YnNjcmliZSgnY2FydExpc3RNb2RpZmljYXRpb24nLCByZXNwb25zZSA9PiB0aGlzLnJlZnJlc2hDYXJ0KCkpOw0KICAgIH0NCiAgICBvbkVycm9yKG1lc3NhZ2UpIHsNCiAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yJyk7DQogICAgfQ0KfTsNClNob3BwaW5nQ2FydENvbXBvbmVudCA9IHRzbGliXzEuX19kZWNvcmF0ZShbDQogICAgQ29tcG9uZW50KHsNCiAgICAgICAgc2VsZWN0b3I6ICdqaGktc2hvcHBpbmctY2FydCcsDQogICAgICAgIHRlbXBsYXRlVXJsOiAnLi9zaG9wcGluZy1jYXJ0LmNvbXBvbmVudC5odG1sJywNCiAgICAgICAgc3R5bGVVcmxzOiBbJy4vc2hvcHBpbmctY2FydC5jb21wb25lbnQuc2NzcyddDQogICAgfSksDQogICAgdHNsaWJfMS5fX21ldGFkYXRhKCJkZXNpZ246cGFyYW10eXBlcyIsIFt0eXBlb2YgKF9hID0gdHlwZW9mIENhcnRTZXJ2aWNlICE9PSAidW5kZWZpbmVkIiAmJiBDYXJ0U2VydmljZSkgPT09ICJmdW5jdGlvbiIgPyBfYSA6IE9iamVjdCwgdHlwZW9mIChfYiA9IHR5cGVvZiBUaWNrZXRzU2VydmljZSAhPT0gInVuZGVmaW5lZCIgJiYgVGlja2V0c1NlcnZpY2UpID09PSAiZnVuY3Rpb24iID8gX2IgOiBPYmplY3QsIHR5cGVvZiAoX2MgPSB0eXBlb2YgSmhpRXZlbnRNYW5hZ2VyICE9PSAidW5kZWZpbmVkIiAmJiBKaGlFdmVudE1hbmFnZXIpID09PSAiZnVuY3Rpb24iID8gX2MgOiBPYmplY3QsIHR5cGVvZiAoX2QgPSB0eXBlb2YgQWNjb3VudFNlcnZpY2UgIT09ICJ1bmRlZmluZWQiICYmIEFjY291bnRTZXJ2aWNlKSA9PT0gImZ1bmN0aW9uIiA/IF9kIDogT2JqZWN0XSkNCl0sIFNob3BwaW5nQ2FydENvbXBvbmVudCk7DQpleHBvcnQgeyBTaG9wcGluZ0NhcnRDb21wb25lbnQgfTsNCg=="},{"version":3,"file":"E:\\Users\\David\\Documents\\Ticketing\\src\\main\\webapp\\app\\entities\\sale\\shopping-cart\\shopping-cart.component.ts","sourceRoot":"","sources":["E:\\Users\\David\\Documents\\Ticketing\\node_modules\\angular-router-loader\\src\\index.js!E:\\Users\\David\\Documents\\Ticketing\\node_modules\\tslint-loader\\index.js!E:\\Users\\David\\Documents\\Ticketing\\src\\main\\webapp\\app\\entities\\sale\\shopping-cart\\shopping-cart.component.ts"],"names":[],"mappings":";;AAAA,OAAO,EAAE,SAAS,EAAU,MAAM,eAAe,CAAC;AAElD,OAAO,EAAE,WAAW,EAAE,MAAM,mBAAmB,CAAC;AAChD,OAAO,EAAE,MAAM,EAAE,GAAG,EAAE,MAAM,gBAAgB,CAAC;AAG7C,OAAO,EAAC,cAAc,EAAC,MAAM,sBAAsB,CAAC;AAEpD,OAAO,EAAC,eAAe,EAAC,MAAM,aAAa,CAAC;AAC5C,OAAO,EAAC,cAAc,EAAC,MAAM,UAAU,CAAC;AAOxC,IAAa,qBAAqB,GAAlC,MAAa,qBAAqB;IAOhC,YAAoB,WAAwB,EACxB,aAA6B,EAC3B,YAA6B,EAC7B,cAA8B;QAHhC,gBAAW,GAAX,WAAW,CAAa;QACxB,kBAAa,GAAb,aAAa,CAAgB;QAC3B,iBAAY,GAAZ,YAAY,CAAiB;QAC7B,mBAAc,GAAd,cAAc,CAAgB;QAT5C,YAAO,GAAe,EAAE,CAAC;QAIzB,WAAM,GAAG,CAAC,CAAC;IAKoC,CAAC;IACxD,QAAQ;QACN,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,qBAAqB,EAAE,CAAC;IAC/B,CAAC;IAEY,WAAW;;YACtB,IAAI,CAAC,WAAW;iBACb,KAAK,EAAE;iBACP,IAAI,CACH,MAAM,CAAC,CAAC,GAA0B,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAC9C,GAAG,CAAC,CAAC,GAA0B,EAAE,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,CAC9C;iBACA,SAAS,CACR,CAAC,GAAY,EAAE,EAAE;gBACf,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;gBACjB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,CAAC;gBACrD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;oBAAG,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;oBAClD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,KAAK,IAAI,CAAC,MAAM,CAAC,CAAC;oBACpE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAM,EAAE,IAAI,EAAA,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,EAAG,CAAC,CAAC;gBAC7H,CAAC,CAAE,CAAC;YACN,CAAC,EACD,CAAC,GAAsB,EAAE,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CACtD,CAAC;QACN,CAAC;KAAA;IAED,qBAAqB;QACnB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,sBAAsB,EAAE,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;IAC7G,CAAC;IAEO,OAAO,CAAC,OAAe;QAC7B,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;IACvB,CAAC;CACF,CAAA;AA3CY,qBAAqB;IALjC,SAAS,CAAC;QACT,QAAQ,EAAE,mBAAmB;QAC7B,WAAW,EAAE,gCAAgC;QAC7C,SAAS,EAAE,CAAC,gCAAgC,CAAC;KAC9C,CAAC;iEAQiC,WAAW,oBAAX,WAAW,oDACT,cAAc,oBAAd,cAAc,oDACb,eAAe,oBAAf,eAAe,oDACb,cAAc,oBAAd,cAAc;GAVzC,qBAAqB,CA2CjC;SA3CY,qBAAqB","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Cart, ICart } from 'app/shared/model/cart.model';\nimport { CartService } from 'app/entities/cart';\nimport { filter, map } from 'rxjs/operators';\nimport { HttpErrorResponse, HttpResponse } from '@angular/common/http';\nimport { ITickets } from 'app/shared/model/tickets.model';\nimport {TicketsService} from 'app/entities/tickets';\nimport {Subscription} from 'rxjs';\nimport {JhiEventManager} from 'ng-jhipster';\nimport {AccountService} from 'app/core';\n\n@Component({\n  selector: 'jhi-shopping-cart',\n  templateUrl: './shopping-cart.component.html',\n  styleUrls: ['./shopping-cart.component.scss']\n})\nexport class ShoppingCartComponent implements OnInit {\n  private tickets: ITickets[] = [];\n  private carts: ICart[];\n  eventSubscriber: Subscription;\n  private account: Promise<Account>;\n  private userId = 0;\n\n  constructor(private cartService: CartService,\n              private ticketService: TicketsService,\n              protected eventManager: JhiEventManager,\n              protected accountService: AccountService) {}\n  ngOnInit() {\n    this.refreshCart();\n    this.registerChangeInCarts();\n  }\n\n  public async refreshCart() {\n    this.cartService\n      .query()\n      .pipe(\n        filter((res: HttpResponse<ICart[]>) => res.ok),\n        map((res: HttpResponse<ICart[]>) => res.body)\n      )\n      .subscribe(\n        (res: ICart[]) => {\n          this.carts = res;\n          this.account = this.accountService.identity().then();\n          this.account.then(x => { this.userId = Number(x.id);\n            this.carts = this.carts.filter(data => data.userId === this.userId);\n            this.carts.forEach(  => { this.ticketService.find(x.ticketId).subscribe(ticket => { this.tickets.push(ticket.body); }); });\n          } );\n        },\n        (res: HttpErrorResponse) => this.onError(res.message)\n      );\n  }\n\n  registerChangeInCarts() {\n    this.eventSubscriber = this.eventManager.subscribe('cartListModification', response => this.refreshCart());\n  }\n\n  private onError(message: string) {\n    console.log('Error');\n  }\n}\n"]}]}