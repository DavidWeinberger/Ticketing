{"remainingRequest":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\thread-loader\\dist\\cjs.js??ref--9-2!E:\\Users\\David\\Documents\\Ticketing\\node_modules\\ts-loader\\index.js??ref--9-3!E:\\Users\\David\\Documents\\Ticketing\\node_modules\\angular-router-loader\\src\\index.js!E:\\Users\\David\\Documents\\Ticketing\\node_modules\\tslint-loader\\index.js!E:\\Users\\David\\Documents\\Ticketing\\src\\main\\webapp\\app\\entities\\sale\\shopping-cart\\shopping-cart.component.ts","dependencies":[{"path":"E:\\Users\\David\\Documents\\Ticketing\\src\\main\\webapp\\app\\entities\\sale\\shopping-cart\\shopping-cart.component.ts","mtime":1574195788771},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\angular2-template-loader\\index.js","mtime":1486570058000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\angular-router-loader\\src\\index.js","mtime":1512749902000},{"path":"E:\\Users\\David\\Documents\\Ticketing\\node_modules\\tslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tICJ0c2xpYiI7DQp2YXIgX2EsIF9iLCBfYywgX2Q7DQppbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAYW5ndWxhci9jb3JlJzsNCmltcG9ydCB7IENhcnRTZXJ2aWNlIH0gZnJvbSAnYXBwL2VudGl0aWVzL2NhcnQnOw0KaW1wb3J0IHsgZmlsdGVyLCBtYXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7DQppbXBvcnQgeyBUaWNrZXRzU2VydmljZSB9IGZyb20gJ2FwcC9lbnRpdGllcy90aWNrZXRzJzsNCmltcG9ydCB7IEpoaUV2ZW50TWFuYWdlciB9IGZyb20gJ25nLWpoaXBzdGVyJzsNCmltcG9ydCB7IEFjY291bnRTZXJ2aWNlIH0gZnJvbSAnYXBwL2NvcmUnOw0KbGV0IFNob3BwaW5nQ2FydENvbXBvbmVudCA9IGNsYXNzIFNob3BwaW5nQ2FydENvbXBvbmVudCB7DQogICAgY29uc3RydWN0b3IoY2FydFNlcnZpY2UsIHRpY2tldFNlcnZpY2UsIGV2ZW50TWFuYWdlciwgYWNjb3VudFNlcnZpY2UpIHsNCiAgICAgICAgdGhpcy5jYXJ0U2VydmljZSA9IGNhcnRTZXJ2aWNlOw0KICAgICAgICB0aGlzLnRpY2tldFNlcnZpY2UgPSB0aWNrZXRTZXJ2aWNlOw0KICAgICAgICB0aGlzLmV2ZW50TWFuYWdlciA9IGV2ZW50TWFuYWdlcjsNCiAgICAgICAgdGhpcy5hY2NvdW50U2VydmljZSA9IGFjY291bnRTZXJ2aWNlOw0KICAgICAgICB0aGlzLnRpY2tldHMgPSBbXTsNCiAgICAgICAgdGhpcy51c2VySWQgPSAwOw0KICAgIH0NCiAgICBuZ09uSW5pdCgpIHsNCiAgICAgICAgdGhpcy5yZWZyZXNoQ2FydCgpOw0KICAgICAgICB0aGlzLnJlZ2lzdGVyQ2hhbmdlSW5DYXJ0cygpOw0KICAgIH0NCiAgICByZWZyZXNoQ2FydCgpIHsNCiAgICAgICAgdGhpcy5jYXJ0U2VydmljZQ0KICAgICAgICAgICAgLnF1ZXJ5KCkNCiAgICAgICAgICAgIC5waXBlKGZpbHRlcigocmVzKSA9PiByZXMub2spLCBtYXAoKHJlcykgPT4gcmVzLmJvZHkpKQ0KICAgICAgICAgICAgLnN1YnNjcmliZSgocmVzKSA9PiB7DQogICAgICAgICAgICB0aGlzLmNhcnRzID0gcmVzOw0KICAgICAgICAgICAgdGhpcy5hY2NvdW50ID0gdGhpcy5hY2NvdW50U2VydmljZS5pZGVudGl0eSgpLnRoZW4oKTsNCiAgICAgICAgICAgIHRoaXMuYWNjb3VudC50aGVuKHggPT4gew0KICAgICAgICAgICAgICAgIHRoaXMudXNlcklkID0gTnVtYmVyKHguaWQpOw0KICAgICAgICAgICAgICAgIHRoaXMuY2FydHMgPSB0aGlzLmNhcnRzLmZpbHRlcihkYXRhID0+IGRhdGEudXNlcklkID09PSB0aGlzLnVzZXJJZCk7DQogICAgICAgICAgICAgICAgdGhpcy5jYXJ0cy5mb3JFYWNoKHkgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnRpY2tldFNlcnZpY2UuZmluZCh5LnRpY2tldElkKS5zdWJzY3JpYmUodGlja2V0ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGlja2V0cy5wdXNoKHRpY2tldC5ib2R5KTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwgKHJlcykgPT4gdGhpcy5vbkVycm9yKHJlcy5tZXNzYWdlKSk7DQogICAgfQ0KICAgIHJlbW92ZSh0aWNrZXQpIHsNCiAgICAgICAgY29uc3QgY2FydEVudHJ5ID0gdGhpcy5jYXJ0cy5maW5kKHggPT4geC50aWNrZXRJZCA9PT0gdGlja2V0LmlkKTsNCiAgICAgICAgdGhpcy5jYXJ0U2VydmljZS5kZWxldGUoY2FydEVudHJ5LmlkKS5zdWJzY3JpYmUoKTsNCiAgICAgICAgdGlja2V0LnN0YXRlID0gMDsNCiAgICAgICAgdGhpcy50aWNrZXRTZXJ2aWNlLnVwZGF0ZSh0aWNrZXQpLnN1YnNjcmliZSgpOw0KICAgICAgICAvLyBjb25zb2xlLmxvZygndGVzdGVzdHNldHNldHNldCcpOw0KICAgICAgICAvLyB0aGlzLnJlZnJlc2hDYXJ0KCk7DQogICAgfQ0KICAgIHJlZ2lzdGVyQ2hhbmdlSW5DYXJ0cygpIHsNCiAgICAgICAgdGhpcy5ldmVudFN1YnNjcmliZXIgPSB0aGlzLmV2ZW50TWFuYWdlci5zdWJzY3JpYmUoJ2NhcnRMaXN0TW9kaWZpY2F0aW9uJywgcmVzcG9uc2UgPT4gdGhpcy5yZWZyZXNoQ2FydCgpKTsNCiAgICB9DQogICAgb25FcnJvcihtZXNzYWdlKSB7DQogICAgICAgIGNvbnNvbGUubG9nKCdFcnJvcicpOw0KICAgIH0NCn07DQpTaG9wcGluZ0NhcnRDb21wb25lbnQgPSB0c2xpYl8xLl9fZGVjb3JhdGUoWw0KICAgIENvbXBvbmVudCh7DQogICAgICAgIHNlbGVjdG9yOiAnamhpLXNob3BwaW5nLWNhcnQnLA0KICAgICAgICB0ZW1wbGF0ZVVybDogJy4vc2hvcHBpbmctY2FydC5jb21wb25lbnQuaHRtbCcsDQogICAgICAgIHN0eWxlVXJsczogWycuL3Nob3BwaW5nLWNhcnQuY29tcG9uZW50LnNjc3MnXQ0KICAgIH0pLA0KICAgIHRzbGliXzEuX19tZXRhZGF0YSgiZGVzaWduOnBhcmFtdHlwZXMiLCBbdHlwZW9mIChfYSA9IHR5cGVvZiBDYXJ0U2VydmljZSAhPT0gInVuZGVmaW5lZCIgJiYgQ2FydFNlcnZpY2UpID09PSAiZnVuY3Rpb24iID8gX2EgOiBPYmplY3QsIHR5cGVvZiAoX2IgPSB0eXBlb2YgVGlja2V0c1NlcnZpY2UgIT09ICJ1bmRlZmluZWQiICYmIFRpY2tldHNTZXJ2aWNlKSA9PT0gImZ1bmN0aW9uIiA/IF9iIDogT2JqZWN0LCB0eXBlb2YgKF9jID0gdHlwZW9mIEpoaUV2ZW50TWFuYWdlciAhPT0gInVuZGVmaW5lZCIgJiYgSmhpRXZlbnRNYW5hZ2VyKSA9PT0gImZ1bmN0aW9uIiA/IF9jIDogT2JqZWN0LCB0eXBlb2YgKF9kID0gdHlwZW9mIEFjY291bnRTZXJ2aWNlICE9PSAidW5kZWZpbmVkIiAmJiBBY2NvdW50U2VydmljZSkgPT09ICJmdW5jdGlvbiIgPyBfZCA6IE9iamVjdF0pDQpdLCBTaG9wcGluZ0NhcnRDb21wb25lbnQpOw0KZXhwb3J0IHsgU2hvcHBpbmdDYXJ0Q29tcG9uZW50IH07DQo="},{"version":3,"file":"E:\\Users\\David\\Documents\\Ticketing\\src\\main\\webapp\\app\\entities\\sale\\shopping-cart\\shopping-cart.component.ts","sourceRoot":"","sources":["E:\\Users\\David\\Documents\\Ticketing\\node_modules\\angular-router-loader\\src\\index.js!E:\\Users\\David\\Documents\\Ticketing\\node_modules\\tslint-loader\\index.js!E:\\Users\\David\\Documents\\Ticketing\\src\\main\\webapp\\app\\entities\\sale\\shopping-cart\\shopping-cart.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Cart, ICart } from 'app/shared/model/cart.model';\nimport { CartService } from 'app/entities/cart';\nimport { filter, map } from 'rxjs/operators';\nimport { HttpErrorResponse, HttpResponse } from '@angular/common/http';\nimport { ITickets } from 'app/shared/model/tickets.model';\nimport { TicketsService } from 'app/entities/tickets';\nimport { Subscription } from 'rxjs';\nimport { JhiEventManager } from 'ng-jhipster';\nimport { AccountService } from 'app/core';\n\n@Component({\n  selector: 'jhi-shopping-cart',\n  templateUrl: './shopping-cart.component.html',\n  styleUrls: ['./shopping-cart.component.scss']\n})\nexport class ShoppingCartComponent implements OnInit {\n  private tickets: ITickets[] = [];\n  private carts: ICart[];\n  eventSubscriber: Subscription;\n  private account: Promise<Account>;\n  private userId = 0;\n\n  constructor(\n    private cartService: CartService,\n    private ticketService: TicketsService,\n    protected eventManager: JhiEventManager,\n    protected accountService: AccountService\n  ) {}\n  ngOnInit() {\n    this.refreshCart();\n    this.registerChangeInCarts();\n  }\n\n  public refreshCart() {\n    this.cartService\n      .query()\n      .pipe(\n        filter((res: HttpResponse<ICart[]>) => res.ok),\n        map((res: HttpResponse<ICart[]>) => res.body)\n      )\n      .subscribe(\n        (res: ICart[]) => {\n          this.carts = res;\n          this.account = this.accountService.identity().then();\n          this.account.then(x => {\n            this.userId = Number(x.id);\n            this.carts = this.carts.filter(data => data.userId === this.userId);\n            this.carts.forEach(y => {\n              this.ticketService.find(y.ticketId).subscribe(ticket => {\n                this.tickets.push(ticket.body);\n              });\n            });\n          });\n        },\n        (res: HttpErrorResponse) => this.onError(res.message)\n      );\n  }\n\n  public remove(ticket: ITickets) {\n    const cartEntry = this.carts.find(x => x.ticketId === ticket.id);\n    this.cartService.delete(cartEntry.id).subscribe();\n    ticket.state = 0;\n    this.ticketService.update(ticket).subscribe();\n    // console.log('testestsetsetset');\n    // this.refreshCart();\n  }\n\n  registerChangeInCarts() {\n    this.eventSubscriber = this.eventManager.subscribe('cartListModification', response => this.refreshCart());\n  }\n\n  private onError(message: string) {\n    console.log('Error');\n  }\n}\n"]}]}